var e=function(){var e=Date.now(),t=e,n=0,i=1/0,o=0,a=0,s=1/0,d=0,r=0,h=0,c=document.createElement("div");c.id="stats",c.addEventListener("mousedown",(function(e){e.preventDefault(),x(++h%2)}),!1),c.style.cssText="width:80px;opacity:0.9;cursor:pointer";var u=document.createElement("div");u.id="fps",u.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",c.appendChild(u);var l=document.createElement("div");l.id="fpsText",l.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",l.innerHTML="FPS",u.appendChild(l);var p=document.createElement("div");for(p.id="fpsGraph",p.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",u.appendChild(p);74>p.children.length;){(g=document.createElement("span")).style.cssText="width:1px;height:30px;float:left;background-color:#113",p.appendChild(g)}var f=document.createElement("div");f.id="ms",f.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",c.appendChild(f);var m=document.createElement("div");m.id="msText",m.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",m.innerHTML="MS",f.appendChild(m);var v=document.createElement("div");for(v.id="msGraph",v.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",f.appendChild(v);74>v.children.length;){var g;(g=document.createElement("span")).style.cssText="width:1px;height:30px;float:left;background-color:#131",v.appendChild(g)}var x=function(e){switch(h=e){case 0:u.style.display="block",f.style.display="none";break;case 1:u.style.display="none",f.style.display="block"}},y=function(e,t){e.appendChild(e.firstChild).style.height=t+"px"};return{REVISION:11,domElement:c,setMode:x,begin:function(){e=Date.now()},end:function(){var h=Date.now();return n=h-e,i=Math.min(i,n),o=Math.max(o,n),m.textContent=n+" MS ("+i+"-"+o+")",y(v,Math.min(30,30-n/200*30)),r++,h>t+1e3&&(a=Math.round(1e3*r/(h-t)),s=Math.min(s,a),d=Math.max(d,a),l.textContent=a+" FPS ("+s+"-"+d+")",y(p,Math.min(30,30-a/100*30)),t=h,r=0),h},update:function(){e=this.end()}}};!function(t){var n,i,o,a={},s=[],d={};function r(e){this.init(e||{})}function h(e){this.init(e||{})}function c(e){document.removeEventListener("mousemove",c),document.removeEventListener("touchstart",c),document.addEventListener("mousemove",v),document.addEventListener("touchmove",v),document.addEventListener("touchstart",g),v(e),u(),l()}function u(){s=[];for(var e=0;e<d.trails;e++)s.push(new h({spring:.45+e/d.trails*.025}))}function l(){if(n.running){n.globalCompositeOperation="source-over",n.fillStyle="rgba(8,5,16,0.4)",n.fillRect(0,0,n.canvas.width,n.canvas.height),n.globalCompositeOperation="lighter",n.strokeStyle="hsla("+Math.round(i.update())+",90%,50%,0.25)",n.lineWidth=1,n.frame;for(var e,t=0;t<d.trails;t++)(e=s[t]).update(),e.draw();n.frame++,n.stats.update(),requestAnimFrame(l)}}function p(){n.canvas.width=t.innerWidth,n.canvas.height=t.innerHeight}function f(){n.running||(n.running=!0,l())}function m(){n.running=!1}function v(e){e.touches?(a.x=e.touches[0].pageX,a.y=e.touches[0].pageY):(a.x=e.clientX,a.y=e.clientY),e.preventDefault()}function g(e){1==e.touches.length&&(a.x=e.touches[0].pageX,a.y=e.touches[0].pageY)}function x(e){e.keyCode}d.debug=!0,d.friction=.5,d.trails=20,d.size=50,d.dampening=.25,d.tension=.98,Math.TWO_PI=2*Math.PI,r.prototype=(o=0,{init:function(e){this.phase=e.phase||0,this.offset=e.offset||0,this.frequency=e.frequency||.001,this.amplitude=e.amplitude||1},update:function(){return this.phase+=this.frequency,o=this.offset+Math.sin(this.phase)*this.amplitude},value:function(){return o}}),h.prototype=function(){function e(){this.x=0,this.y=0,this.vy=0,this.vx=0}return{init:function(t){this.spring=t.spring+.1*Math.random()-.05,this.friction=d.friction+.01*Math.random()-.005,this.nodes=[];for(var n,i=0;i<d.size;i++)(n=new e).x=a.x,n.y=a.y,this.nodes.push(n)},update:function(){var e=this.spring,t=this.nodes[0];t.vx+=(a.x-t.x)*e,t.vy+=(a.y-t.y)*e;for(var n,i=0,o=this.nodes.length;i<o;i++)t=this.nodes[i],i>0&&(n=this.nodes[i-1],t.vx+=(n.x-t.x)*e,t.vy+=(n.y-t.y)*e,t.vx+=n.vx*d.dampening,t.vy+=n.vy*d.dampening),t.vx*=this.friction,t.vy*=this.friction,t.x+=t.vx,t.y+=t.vy,e*=d.tension},draw:function(){var e,t,i=this.nodes[0].x,o=this.nodes[0].y;n.beginPath(),n.moveTo(i,o);for(var a=1,s=this.nodes.length-2;a<s;a++)e=this.nodes[a],t=this.nodes[a+1],i=.5*(e.x+t.x),o=.5*(e.y+t.y),n.quadraticCurveTo(e.x,e.y,i,o);e=this.nodes[a],t=this.nodes[a+1],n.quadraticCurveTo(e.x,e.y,t.x,t.y),n.stroke(),n.closePath()}}}(),t.requestAnimFrame=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)},t.onload=function(){(n=document.getElementById("hover-tree").getContext("2d")).stats=new e,n.running=!0,n.frame=1,i=new r({phase:Math.random()*Math.TWO_PI,amplitude:85,frequency:.0015,offset:285}),document.addEventListener("mousemove",c),document.addEventListener("touchstart",c),document.body.addEventListener("orientationchange",p),t.addEventListener("resize",p),t.addEventListener("keyup",x),t.addEventListener("focus",f),t.addEventListener("blur",m),p(),t.DEBUG&&(new dat.GUI,d.gui.add(d,"trails",1,30).onChange(u),d.gui.add(d,"size",25,75).onFinishChange(u),d.gui.add(d,"friction",.45,.55).onFinishChange(u),d.gui.add(d,"dampening",.01,.4).onFinishChange(u),d.gui.add(d,"tension",.95,.999).onFinishChange(u),document.body.appendChild(n.stats.domElement))}}(window);
